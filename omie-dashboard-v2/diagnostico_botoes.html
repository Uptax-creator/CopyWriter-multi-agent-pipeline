<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico de Bot√µes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { padding: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Diagn√≥stico de Bot√µes</h1>
        
        <div class="test-section">
            <h3>1. Teste B√°sico de Clique</h3>
            <button class="btn btn-primary" onclick="testClick('Bot√£o 1')">Teste B√°sico</button>
            <button class="btn btn-success" onclick="alert('Alerta funcionando!')">Teste Alert</button>
        </div>
        
        <div class="test-section">
            <h3>2. Bot√µes da Aplica√ß√£o Original</h3>
            <button class="btn btn-primary btn-lg me-3" onclick="showRegister()">
                <i class="bi bi-person-plus me-2"></i>Cadastrar-se
            </button>
            <button class="btn btn-outline-primary btn-lg" onclick="showLogin()">
                <i class="bi bi-box-arrow-in-right me-2"></i>Entrar
            </button>
        </div>
        
        <div class="test-section">
            <h3>3. Teste de Carregamento de Scripts</h3>
            <button class="btn btn-info" onclick="checkScripts()">Verificar Scripts</button>
            <button class="btn btn-warning" onclick="checkAuthManager()">Verificar AuthManager</button>
        </div>
        
        <div class="test-section">
            <h3>4. Log de Eventos</h3>
            <div id="log" class="log">
                Logs aparecer√£o aqui...
            </div>
            <button class="btn btn-secondary" onclick="clearLog()">Limpar Log</button>
        </div>
        
        <div class="test-section">
            <h3>5. Verificar Console</h3>
            <p>Abra Developer Tools (F12) e veja se h√° erros no Console.</p>
            <button class="btn btn-dark" onclick="console.log('Teste de console')">Log no Console</button>
        </div>
    </div>

    <!-- Scripts originais da aplica√ß√£o -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/security.js"></script>
    <script src="js/backend-integration.js"></script>
    <script src="js/validation.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/app.js"></script>
    
    <script>
        function log(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function testClick(buttonName) {
            log(`‚úÖ ${buttonName} clicado com sucesso!`);
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = 'Log limpo...';
        }
        
        function checkScripts() {
            log('üîç Verificando scripts...');
            
            // Verificar se vari√°veis globais existem
            if (typeof AuthManager !== 'undefined') {
                log('‚úÖ AuthManager carregado');
            } else {
                log('‚ùå AuthManager N√ÉO carregado');
            }
            
            if (typeof BackendIntegration !== 'undefined') {
                log('‚úÖ BackendIntegration carregado');
            } else {
                log('‚ùå BackendIntegration N√ÉO carregado');
            }
            
            if (typeof ValidationManager !== 'undefined') {
                log('‚úÖ ValidationManager carregado');
            } else {
                log('‚ùå ValidationManager N√ÉO carregado');
            }
            
            // Verificar fun√ß√µes globais
            if (typeof showRegister === 'function') {
                log('‚úÖ showRegister() existe');
            } else {
                log('‚ùå showRegister() N√ÉO existe');
            }
            
            if (typeof showLogin === 'function') {
                log('‚úÖ showLogin() existe');
            } else {
                log('‚ùå showLogin() N√ÉO existe');
            }
        }
        
        function checkAuthManager() {
            log('üîç Verificando AuthManager...');
            
            if (window.authManager) {
                log('‚úÖ window.authManager existe');
                log(`‚úÖ Backend: ${window.authManager.backend ? 'conectado' : 'desconectado'}`);
            } else {
                log('‚ùå window.authManager N√ÉO existe');
            }
            
            // Tentar criar AuthManager
            try {
                const testAuth = new AuthManager();
                log('‚úÖ AuthManager pode ser instanciado');
            } catch (error) {
                log(`‚ùå Erro ao criar AuthManager: ${error.message}`);
            }
        }
        
        // Verifica√ß√£o autom√°tica ao carregar
        window.addEventListener('load', function() {
            log('üöÄ P√°gina carregada');
            setTimeout(() => {
                checkScripts();
                checkAuthManager();
            }, 1000);
        });
        
        // Capturar erros JavaScript
        window.addEventListener('error', function(e) {
            log(`‚ùå Erro JavaScript: ${e.message} (${e.filename}:${e.lineno})`);
        });
        
        // Redefinir fun√ß√µes para teste
        window.showRegister = function() {
            log('üîµ showRegister() chamada - redirecionando...');
            if (window.authManager && window.authManager.showRegister) {
                window.authManager.showRegister();
            } else {
                log('‚ùå authManager.showRegister n√£o encontrado');
            }
        };
        
        window.showLogin = function() {
            log('üîµ showLogin() chamada - redirecionando...');
            if (window.authManager && window.authManager.showLogin) {
                window.authManager.showLogin();
            } else {
                log('‚ùå authManager.showLogin n√£o encontrado');
            }
        };
    </script>
</body>
</html>